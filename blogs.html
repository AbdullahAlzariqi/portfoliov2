<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PressCanvas — Blogs</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&family=Fira+Sans:wght@300;400;500;700&family=Merriweather:ital,wght@0,300;0,400;0,700;1,300;1,400&family=Playfair+Display:wght@600;700;800&display=swap" rel="stylesheet">
  
  <style>
    :root {
      /* Colors — Newspaper-inspired (Newsprint/default) */
      --bg-primary: #FAF9F6;
      --bg-secondary: #F5F3EE;
      --bg-canvas: #FFFFFF;
      --bg-inset: #EFEDE6;

      --text-primary: #1A1A1A;
      --text-secondary: #4B4B4B;
      --text-muted: #7A7A7A;
      --text-accent: #A62317;

      --border-light: #D0CFCB;
      --border-medium: #B0AEAA;
      --border-dark: #7D7B76;

      --accent-highlight: #E6D5B8;
      --accent-shadow: #C4B69C;
      --accent-ink: #101010;

      /* Type */
      --font-headline: 'Playfair Display', serif;
      --font-body: 'Merriweather', serif;
      --font-accent: 'Fira Sans', sans-serif;
      --font-mono: 'Courier Prime', monospace;

      /* Scale */
      --size-xs: .75rem; --size-sm: .875rem; --size-md: 1rem; --size-lg: 1.25rem; --size-xl: 1.5rem; --size-2xl: 2rem; --size-3xl: 3rem;

      /* Spacing */
      --space-xxs: .25rem; --space-xs: .5rem; --space-sm: .75rem; --space-md: 1rem; --space-lg: 1.5rem; --space-xl: 2rem; --space-2xl: 3rem; --space-3xl: 4rem;

      /* Borders & Shadows */
      --radius-sm: 2px; --radius-md: 4px; --radius-lg: 8px;
      --border-thin: 1px; --border-med: 2px; --border-thick: 4px;
      --shadow-ink: 0 2px 4px rgba(0,0,0,.20); --shadow-soft: 0 4px 12px rgba(0,0,0,.10); --shadow-paper: 0 6px 24px rgba(0,0,0,.15);

      /* Motion */
      --ease-smooth: cubic-bezier(0.25, 1, 0.5, 1);
      --dur-fast: .45s; --dur-base: .8s; --dur-slow: 1.2s;

      /* Layout */
      --maxw: 1100px;

      /* Lightbox */
      --overlay: rgba(10,10,10,.6);
    }

    /* Theme: Sepia */
    .theme-sepia {
      --bg-primary: #F6F1E7;
      --bg-secondary: #EFE8DB;
      --bg-inset: #E7DECD;
      --text-primary: #221E1A;
      --text-secondary: #534B44;
      --text-muted: #7A6E64;
      --text-accent: #8C2C1F;
      --border-light: #D6CFC4; --border-medium: #B9B0A3; --border-dark: #847A6D;
      --accent-highlight: #E4CFAF; --accent-shadow: #C9B690;
    }

    /* Theme: Night */
    .theme-night {
      --bg-primary: #0E0F10;
      --bg-secondary: #121416;
      --bg-canvas: #16181B;
      --bg-inset: #0B0C0D;
      --text-primary: #ECECEC;
      --text-secondary: #B8B8B8;
      --text-muted: #8E8E8E;
      --text-accent: #E05A4F;
      --border-light: #2B2E33; --border-medium: #3A3F45; --border-dark: #4A5159;
      --accent-highlight: #2B2A28; --accent-shadow: #1F1E1D;
      --overlay: rgba(240,240,240,.15);
    }
    *, *::before, *::after { box-sizing: border-box; }
    body { margin: 0; color: var(--text-primary); background: var(--bg-primary);
      font-family: var(--font-body); line-height: 1.6;
      background-image:
        radial-gradient( rgba(0,0,0,0.03) 1px, transparent 1px ),
        radial-gradient( rgba(0,0,0,0.02) .5px, transparent .5px ),
        linear-gradient(0deg, rgba(0,0,0,0.04), rgba(0,0,0,0));
      background-size: 24px 24px, 12px 12px, 100% 100%;
      background-position: 0 0, 12px 12px, 0 0;
    }
    a { color: var(--text-accent); text-decoration: none; }
    .container { width: 100%; max-width: var(--maxw); margin: 0 auto; padding: 0 var(--space-md); }
    .headline { font-family: var(--font-headline); font-weight: 800; line-height: 1.1; font-size: clamp(2rem, 5vw, 3.2rem); margin: 0 0 var(--space-sm) 0; }
    .lede { font-family: var(--font-accent); color: var(--text-secondary); font-size: clamp(1rem, 2.2vw, 1.1rem); }
    .masthead { position: fixed; top: .75rem; left: .75rem; z-index: 40; background: var(--bg-canvas); border: var(--border-thin) solid var(--border-light);
      box-shadow: var(--shadow-soft); font-family: var(--font-mono); font-size: var(--size-xs); padding: .35rem .5rem; border-radius: var(--radius-sm);
      text-transform: uppercase; letter-spacing: .06em; color: var(--text-secondary); display:flex; align-items:center; gap:.5rem; }
    .masthead .sep { opacity:.4; }
    /* Theme switcher */
    .controls { display:flex; align-items:center; gap:.35rem; }
    .select { font-family: var(--font-mono); font-size: var(--size-xs); padding: .2rem .4rem; border-radius: 6px; border: 1px solid var(--border-medium); background: var(--bg-canvas); color: var(--text-secondary); }
    .topnav { position: fixed; right: .75rem; top: .75rem; z-index: 40; display: flex; gap: .35rem; flex-wrap: wrap; max-width: 44vw; justify-content: flex-end; }
    .topnav a { border: 1px solid var(--border-medium); background: var(--bg-canvas); padding: .25rem .5rem; border-radius: 999px; font-family: var(--font-mono); font-size: var(--size-xs); color: var(--text-secondary); }
    .topnav a:hover { background: var(--accent-highlight); color: var(--text-primary); }
    .topnav a.active { background: var(--text-accent); color:#fff; border-color: transparent; }
    section.page { min-height: 100svh; display: grid; align-items: center; background: var(--bg-secondary);
      border-top: var(--border-thin) solid var(--border-light); border-bottom: var(--border-thin) solid var(--border-light);
      box-shadow: inset 0 1px 0 rgba(0,0,0,.04), inset 0 -1px 0 rgba(0,0,0,.04); }
    section.page:nth-child(odd) { background: var(--bg-primary); }
    .btn { display: inline-flex; align-items: center; gap: .5rem; font-family: var(--font-accent); font-weight: 500; font-size: var(--size-sm);
      padding: .6rem 1rem; border-radius: var(--radius-sm); border: var(--border-thin) solid var(--border-medium); background: var(--bg-canvas); color: var(--text-primary);
      box-shadow: var(--shadow-ink); transition: transform var(--dur-fast) var(--ease-smooth), background var(--dur-fast) ease; cursor: pointer; }
    .btn:hover { background: var(--accent-highlight); transform: translateY(-1px); }
    .btn.pill { border-radius: 999px; }
    .btn.active { background: var(--text-accent); color: #fff; border-color: transparent; }
    .filters { display:flex; gap:.5rem; flex-wrap:wrap; margin: var(--space-md) 0; }
    .grid { display: grid; gap: var(--space-lg); }
    .posts-grid { grid-template-columns: repeat(12, 1fr); gap: var(--space-lg); }
    .post-card { grid-column: span 6; display: flex; flex-direction: column; gap: .5rem; }
    @media (max-width: 900px) { .post-card { grid-column: span 12; } }
    .frame { background: var(--bg-canvas); border: var(--border-thin) solid var(--border-light); box-shadow: var(--shadow-paper); border-radius: var(--radius-md); overflow: hidden; }
    .post-card img { width: 100%; height: 220px; object-fit: cover; display: block; }
    .meta { font-family: var(--font-mono); color: var(--text-secondary); font-size: var(--size-xs); }
    .tag { display: inline-block; font-family: var(--font-mono); font-size: var(--size-xs); border: 1px solid var(--border-medium); color: var(--text-secondary); padding: .15rem .4rem; border-radius: 999px; background: var(--bg-canvas); }
  </style>
</head>
<body class="theme-newsprint">
  <div class="masthead">PressCanvas <span class="sep">•</span> <span id="metaDate"></span> <span class="sep">•</span> <span id="metaLocation">Istanbul</span>
    <div class="controls" style="margin-left:.5rem;">
      <label for="themeSel" class="sr-only" style="position:absolute;left:-9999px;">Theme</label>
      <select id="themeSel" class="select" aria-label="Theme">
        <option value="newsprint" selected>Newsprint</option>
        <option value="sepia">Sepia</option>
        <option value="night">Night</option>
      </select>
    </div>
  </div>

  <nav class="topnav" aria-label="Quick navigation">
    <a href="index.html#hero">Front Page</a>
    <a href="index.html#about">Feature</a>
    <a href="index.html#projects">Gallery</a>
    <a href="index.html#highlights">Highlights</a>
    <a class="active" href="blogs.html">Blogs</a>
    <a href="index.html#contact">Contact</a>
  </nav>

  <section id="blog" class="page">
    <div class="container" style="padding: var(--space-2xl) 0;">
      <h1 class="headline">Blog</h1>
      <p class="lede">Notes, case studies, and essays on design, development, and systems.</p>

      <div id="filters" class="filters" role="group" aria-label="Filter posts by tag"></div>
      <div id="postsGrid" class="grid posts-grid" aria-live="polite"></div>
      <p id="emptyMsg" class="meta" style="display:none;">No posts yet. Drop Markdown files in <code>assets/blog</code> and build the index.</p>
    </div>
  </section>

  <script>
    const $ = (s, r=document) => r.querySelector(s);
    const $$ = (s, r=document) => Array.from(r.querySelectorAll(s));

    // Date
    const metaDate = document.getElementById('metaDate');
    const now = new Date();
    const fmt = new Intl.DateTimeFormat(undefined, { year: 'numeric', month: 'long', day: 'numeric' });
    if (metaDate) metaDate.textContent = fmt.format(now);

    // Theme switcher (same wiring as index.html)
    const themeSel = $('#themeSel');
    const applyTheme = (val) => {
      document.body.classList.remove('theme-newsprint','theme-sepia','theme-night');
      const map = { newsprint:'theme-newsprint', sepia:'theme-sepia', night:'theme-night' };
      document.body.classList.add(map[val] || 'theme-newsprint');
      console.log('theme:apply', val);
      localStorage.setItem('presscanvas-theme', val);
    };
    if (themeSel) {
      themeSel.addEventListener('change', (e)=> applyTheme(e.target.value));
      const savedTheme = localStorage.getItem('presscanvas-theme');
      if (savedTheme) { themeSel.value = savedTheme; applyTheme(savedTheme); }
    }

    // Render posts
    const postsGrid = $('#postsGrid');
    const filtersEl = $('#filters');
    const emptyMsg = $('#emptyMsg');
    let posts = [];
    let activeTag = 'all';

    function renderFilters(tags) {
      const all = ['all', ...Array.from(new Set(tags)).sort((a,b)=> a.localeCompare(b))];
      filtersEl.innerHTML = all.map(tag => `<button class="btn" data-tag="${tag}">${tag}</button>`).join('');
      $$("[data-tag]", filtersEl).forEach(btn => {
        btn.classList.toggle('active', btn.dataset.tag === activeTag);
        btn.addEventListener('click', () => { activeTag = btn.dataset.tag; render(); });
      });
    }

    function render() {
      if (!posts.length) { postsGrid.innerHTML = ''; emptyMsg.style.display = 'block'; filtersEl.innerHTML = ''; return; }
      emptyMsg.style.display = 'none';
      const tags = posts.flatMap(p => p.tags || []);
      renderFilters(tags);
      const visible = activeTag === 'all' ? posts : posts.filter(p => (p.tags||[]).includes(activeTag));
      postsGrid.innerHTML = visible.map(p => `
        <article class="post-card">
          <a class="frame" href="post.html?slug=${p.slug}">
            ${p.hero ? `<img src="${p.hero}" alt="${p.title}">` : ''}
          </a>
          <div>
            <h3 style="margin:.5rem 0 .25rem 0; font-family: var(--font-headline); font-size: clamp(1.25rem, 2.4vw, 1.6rem);">
              <a href="post.html?slug=${p.slug}" style="color:inherit;">${p.title}</a>
            </h3>
            <div class="meta">${p.date || ''}${p.readingTime ? ` • ${p.readingTime}` : ''}</div>
            ${p.excerpt ? `<p style="margin:.35rem 0; color: var(--text-secondary);">${p.excerpt}</p>` : ''}
            <div style="display:flex; gap:.35rem; flex-wrap:wrap;">${(p.tags||[]).map(t=>`<span class="tag">${t}</span>`).join('')}</div>
          </div>
        </article>
      `).join('');
    }

    (async function load() {
      try {
        const res = await fetch('assets/blog/posts.json', { cache: 'no-store' });
        if (!res.ok) throw new Error('Failed to load posts index');
        const data = await res.json();
        posts = (Array.isArray(data) ? data : (data.posts || [])).sort((a,b)=> (b.date||'').localeCompare(a.date||''));
        render();
      } catch (err) {
        console.error('blog:load_error', err);
        posts = [];
        render();
      }
    })();
  </script>
</body>
</html>


